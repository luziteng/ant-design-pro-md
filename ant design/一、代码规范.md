## 一、规范

#### 1. 【约定强制】命名



​    文件名、变量名、函数名、类名的命名格式参照各类文件的模板文件。

​    components和pages下的文件，除index.js、index.less、models下的文件外，其余文件、文件夹一律用大驼峰命名。

​    变量、函数、类名用小驼峰命名。

​    命名要有意义，不允许为了方便而使用A、B、C、D或1、2、3、4作为命名标识。





#### 2. 【约定强制】样式

​    不用id选择器写样式，公共样式统一写在global.less，注意区分全局样式和局部样式，全局样式不要覆盖别人的样式。少写内联样式。



#### 3. 【约定强制】组件

​    不要把所有代码都堆在容器组件，把可复用的展示组件抽离出来。

​    自定义组件首字母大写。



#### 4. 【eslint强制】变量

​    定义常量、变量用const 和let。



#### 5. 【建议】请求某个接口的loading状态不用自己写

![](C:\Users\lp\Pictures\截图\tapd_41193021_1565343715_91.png)

#### 6. 【建议】插件

​    在安装使用新插件或工具前，可以先查看packjson中是否已包含此类插件，尽量减少插件的使用。



#### 7. 【约定强制】数据处理

​    把一些数据处理和需要暂时存储的状态存储在model层，减少重复处理的代码。把视图和逻辑分开。参考pages/Permission/GroupList

#### 8. 【建议】注释

​    尽量添加注释说明某段代码的功能。





#### 9. 【eslint强制】开启eslint检查工具检查代码规范性



## 二、公共组件

#### 1.上传组件 components/Form

通用：Upload

Oss上传：NewUpload

可拖拽排序：UploadDrag



#### 2.操作权限组件 components/Action

默认：index    ![图片描述](https://www.tapd.cn/tfl/pictures/201908/tapd_41193021_1565343961_25.png)

开关选择器：Switch

数字输入框：    ![图片描述](https://www.tapd.cn/tfl/pictures/201908/tapd_41193021_1565344009_52.png)    ![图片描述](https://www.tapd.cn/tfl/pictures/201908/tapd_41193021_1565344016_27.png)



#### 3.列表图片展示 components/TooptipImg



![图片描述](https://www.tapd.cn/tfl/pictures/201908/tapd_41193021_1565344032_96.png)

(注：在使用公共组件时请勿随意修改代码或者业务逻辑，以免影响其他模块的使用。)



**4. 页面头部信息展示**     **components/PageHeaderWrapper**

默认: ![点击看原图](https://www.tapd.cn/tfl/captures/2019-08/tapd_41193021_base64_1565686944_28.png)

自定义当前页名称：currentTitle

tab切换： hasList

![点击看原图](https://www.tapd.cn/tfl/captures/2019-08/tapd_41193021_base64_1565682168_79.png)

![点击看原图](https://www.tapd.cn/tfl/captures/2019-08/tapd_41193021_base64_1565686834_28.png)







**三、常见问题及注意事项**

​    **1.** **【****约定强制****】****model分为两类，全局model和页面model。全局model位于/src/models目录，所有页面都可引用；页面model不能被其它页面引用。**





​    **2.** **【****约定强制****】****一些为方便暂时写死的数据不能提交。**

![](C:\Users\lp\Pictures\截图\tapd_41193021_1565344315_10.png)



​    **3.** **【建议****】****重复无用代码**

![](C:\Users\lp\Pictures\截图\tapd_41193021_1565344437_53.png)



​    **4.** **【约定强制****】****数据初始值及赋值问题，数据类型应保持一致**

​    

​    **数据是什么类型的，初始值就应该设置该类型的空值，如数组为[]，对象为{}，赋值时也应做相应处理，以防数据不对时页面报错。**

​    ![](C:\Users\lp\Pictures\截图\tapd_41193021_1565344457_52.png)

​    **数据类型不一致，本来是字符串，空的时候要么undefined，要么空字符串**

​    ![](C:\Users\lp\Pictures\截图\tapd_41193021_1565345129_35.png)

​    **5.** **【****eslint强制****】****太多嵌套，嵌套时变量名重复。**

![](C:\Users\lp\Pictures\截图\tapd_41193021_1565345258_46.png)



​    **6.** **【****约定强制****】****一个页面变量太多，变量命名不规范（A、B、C、1、2、3是什么）**

![](C:\Users\lp\Pictures\截图\tapd_41193021_1565345292_45.png)

​    **7.** **【建议****】****重复的样式不要用内联样式**

![](C:\Users\lp\Pictures\截图\tapd_41193021_1565345378_90.png)



​    **8.** **【建议****】****善用form表单，筛选不用每个都写个onChange函数，导致很多重复代码（参考Semoling/Product/Palette）**

![](C:\Users\lp\Pictures\截图\tapd_41193021_1565345416_25.png)

​    **9.** **【****约定强制****】****不能直接调用生命周期函数**

![](C:\Users\lp\Pictures\截图\tapd_41193021_1565345451_10.png)

​    **10.** **【****约定强制****】****对setState的使用不了解，setState之后并不是立即更新的。**

![](C:\Users\lp\Pictures\截图\tapd_41193021_1565345491_96.png)

​    **11.** **【****eslint强制****】****提交代码前清除掉console.log()方法。**



​    **12.** **【****eslint强制****】****使用类型安全的 === 和 !== 操作符代替 == 和 != 操作符**

![](C:\Users\lp\Pictures\截图\tapd_41193021_1565345549_49.png)



​    **13.** **【建议****】****DOM结构相同的组件可以通过数组遍历生成而不是单纯的复制。**



![](C:\Users\lp\Pictures\截图\tapd_41193021_1565345582_40.png)

​    **14.** **【建议****】****对return的用法不熟悉, return已经终止了当前函数的执行了。**

![](C:\Users\lp\Pictures\截图\tapd_41193021_1565345608_39.png)

  **15.** **【****约定强制****】****路由配置path没有统一写法。统一用小驼峰命名。**

![](C:\Users\lp\Pictures\截图\tapd_41193021_base64_1565531474_96.png)

**16.** **【建议****】****if..else..中，短的执行写前面，  长的执行写后面。如果if...else...后面不需要执行了，可以直接return**



![](C:\Users\lp\Pictures\截图\tapd_41193021_1565581572_87 (1).png)

![](C:\Users\lp\Pictures\截图\tapd_41193021_1565581585_15.png)